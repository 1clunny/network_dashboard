<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Sentinel Dashboard</title>

  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      safelist: ['text-red-500', 'text-yellow-400', 'text-green-400'],
      theme: {
        extend: {
          colors: {
            bg: '#0B0F19',
            primary: '#2563EB',
            accent: '#00C6FF'
          },
          boxShadow: {
            glow: '0 0 25px rgba(0,198,255,0.2)',
            innerGlow: 'inset 0 0 20px rgba(0,198,255,0.15)'
          },
          borderRadius: {
            xl: '1rem',
            '2xl': '1.5rem'
          }
        }
      }
    }
  </script>
  <script src="https://unpkg.com/lucide@latest"></script>

  <style>
    body {
      background: radial-gradient(circle at top left, #0b0f19, #060910);
      background-attachment: fixed;
    }
    .sidebar {
      transition: transform 0.3s ease, opacity 0.2s ease;
    }
    .sidebar.hidden {
      transform: translateX(-100%);
      opacity: 0;
    }
  </style>
</head>

<body class="text-gray-100 min-h-screen flex bg-bg">
  <!-- SIDEBAR -->
  <aside id="sidebar" class="sidebar fixed md:static z-50 w-64 md:w-64 bg-gray-900/50 backdrop-blur-xl border-r border-gray-800 flex flex-col items-start p-4 space-y-8 shadow-glow h-full">
    <div class="flex items-center justify-between w-full">
      <div class="flex items-center gap-3">
        <img src="{{ url_for('static', filename='logo.png') }}" class="w-10 h-10 rounded-xl" alt="Sentinel Logo" />
        <span class="text-xl font-bold bg-gradient-to-r from-accent to-blue-500 bg-clip-text text-transparent">SENTINEL</span>
      </div>
      <button id="closeMenu" class="md:hidden p-2 hover:bg-gray-800 rounded-lg transition">
        <i data-lucide="x"></i>
      </button>
    </div>

    <nav class="flex flex-col space-y-3 w-full mt-4">
      <a href="/" class="flex items-center gap-3 p-3 rounded-xl hover:bg-gray-800/60 transition group">
        <i data-lucide="layout-dashboard" class="w-5 h-5 text-accent group-hover:scale-110 transition"></i>
        <span class="text-sm font-medium">Dashboard</span>
      </a>
      <a href="#" class="flex items-center gap-3 p-3 rounded-xl hover:bg-gray-800/60 transition group">
        <i data-lucide="wifi" class="w-5 h-5 text-blue-400 group-hover:scale-110 transition"></i>
        <span class="text-sm font-medium">Networks</span>
      </a>
      <a href="#" class="flex items-center gap-3 p-3 rounded-xl hover:bg-gray-800/60 transition group">
        <i data-lucide="shield" class="w-5 h-5 text-green-400 group-hover:scale-110 transition"></i>
        <span class="text-sm font-medium">Security</span>
      </a>
      <a href="#" class="flex items-center gap-3 p-3 rounded-xl hover:bg-gray-800/60 transition group">
        <i data-lucide="settings" class="w-5 h-5 text-gray-400 group-hover:scale-110 transition"></i>
        <span class="text-sm font-medium">Settings</span>
      </a>
    </nav>

    <div class="mt-auto w-full">
      <button id="scanBtn" class="scan-btn w-full">
        <span id="scanText">Run Scan</span>
        <div id="scanProgress" class="scan-progress"></div>
      </button>
    </div>
  </aside>

  <!-- MAIN -->
  <main class="flex-1 p-8 md:ml-0 ml-0">
    <header class="flex items-center justify-between mb-8 md:hidden">
      <button id="openMenu" class="p-2 bg-gray-900/60 rounded-lg border border-gray-800">
        <i data-lucide="menu"></i>
      </button>
      <h1 class="text-lg font-semibold text-accent">Sentinel</h1>
    </header>

    {% block content %}{% endblock %}
  </main>

  <style>
    .scan-btn {
      position: relative;
      overflow: hidden;
      border: none;
      outline: none;
      padding: 0.8rem 1rem;
      font-weight: 600;
      border-radius: 1rem;
      color: white;
      background: linear-gradient(90deg, #2563eb, #00c6ff);
      box-shadow: 0 0 15px rgba(0,198,255,0.4);
      transition: all 0.3s ease;
    }

    .scan-btn:hover {
      box-shadow: 0 0 25px rgba(0,198,255,0.6);
      transform: translateY(-2px);
    }

    .scan-progress {
      position: absolute;
      bottom: 0;
      left: 0;
      height: 3px;
      width: 0%;
      background: linear-gradient(90deg, #00c6ff, #2563eb);
      border-radius: 0 0 1rem 1rem;
      box-shadow: 0 0 10px rgba(0,198,255,0.7);
      transition: width 0.1s linear;
    }

    .scan-btn.scanning {
      cursor: wait;
      opacity: 0.9;
    }

    .scan-btn.done {
      background: linear-gradient(90deg, #22c55e, #16a34a);
      box-shadow: 0 0 25px rgba(34,197,94,0.6);
    }
  </style>

  <script>
    lucide.createIcons();

    const sidebar = document.getElementById('sidebar');
    const openMenu = document.getElementById('openMenu');
    const closeMenu = document.getElementById('closeMenu');
    openMenu?.addEventListener('click', () => sidebar.classList.remove('hidden'));
    closeMenu?.addEventListener('click', () => sidebar.classList.add('hidden'));

    // SCAN BUTTON
    const scanBtn = document.getElementById('scanBtn');
    const scanProgress = document.getElementById('scanProgress');
    const scanText = document.getElementById('scanText');

    if (scanBtn) {
      scanBtn.addEventListener('click', () => {
        if (scanBtn.classList.contains('scanning')) return;

        scanBtn.classList.add('scanning');
        scanText.textContent = 'Scanning...';
        scanProgress.style.width = '0%';

        let progress = 0;
        const interval = setInterval(() => {
          progress += Math.random() * 10;
          scanProgress.style.width = `${Math.min(progress, 100)}%`;

          if (progress >= 100) {
            clearInterval(interval);
            scanBtn.classList.remove('scanning');
            scanBtn.classList.add('done');
            scanText.textContent = 'âœ“ Scan Complete';
            setTimeout(() => {
              scanBtn.classList.remove('done');
              scanText.textContent = 'Run Scan';
              scanProgress.style.width = '0%';
            }, 2500);
          }
        }, 300);
      });
    }
  </script>
</body>
</html>